<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Site Accessible - Loupe Interactive</title>
    <style>
        /* --- CONFIGURATION GLOBALE --- */
        :root {
            --bg-color: #1a1a1a;
            --text-color: #ffff00; /* Jaune sur noir pour haut contraste */
            --highlight-color: #000000;
            --loupe-size: 250px;
            --loupe-zoom: 2.5; /* Facteur de grossissement */
        }

        * {
            box-sizing: border-box;
            cursor: none; /* On cache le curseur par défaut pour utiliser la loupe */
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Verdana', 'Arial', sans-serif; /* Polices sans-serif pour lisibilité */
            margin: 0;
            padding: 0;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* --- CONTENU DU SITE --- */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 50px 20px;
        }

        header {
            border-bottom: 2px solid var(--text-color);
            margin-bottom: 40px;
            padding-bottom: 20px;
        }

        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        p {
            font-size: 1.5rem;
            margin-bottom: 30px;
        }

        button {
            background-color: var(--text-color);
            color: var(--bg-color);
            border: none;
            padding: 15px 30px;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 10px;
            margin-right: 10px;
            transition: transform 0.2s;
        }

        button:hover {
            transform: scale(1.1);
            background-color: #fff;
        }

        .card {
            border: 2px solid var(--text-color);
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
        }

        /* --- LA LOUPE (CURSEUR) --- */
        #loupe {
            position: fixed;
            pointer-events: none; /* La loupe ne bloque pas les clics */
            width: var(--loupe-size);
            height: var(--loupe-size);
            border-radius: 50%;
            border: 5px solid #fff;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
            background-color: #000; /* Fond noir profond dans la loupe */
            overflow: hidden;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            transform: translate(-50%, -50%); /* Centrer sur la souris */
            transition: opacity 0.2s;
        }

        /* Le texte à l'intérieur de la loupe */
        #loupe-content {
            color: #fff;
            font-size: 2rem; /* Taille de base dans la loupe */
            font-weight: bold;
            padding: 20px;
            line-height: 1.2;
        }

        /* Petit point rouge au centre pour viser */
        #loupe::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 6px;
            height: 6px;
            background-color: red;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        /* Style pour les images dans la loupe */
        #loupe img {
            width: 100%;
            height: auto;
            object-fit: cover;
        }

    </style>
</head>
<body>

    <div id="loupe">
        <div id="loupe-content">Survolez un élément</div>
    </div>

    <div class="container">
        <header>
            <h1 data-read="Bienvenue sur AccessiWeb">AccessiWeb</h1>
            <p data-read="Un site conçu pour la déficience visuelle.">Un site démonstrateur conçu pour améliorer la lisibilité.</p>
        </header>

        <main>
            <section class="card">
                <h2 data-read="Comment ça marche ?">Comment ça marche ?</h2>
                <p data-read="Utilisez votre souris pour explorer la page. Le cercle agit comme une loupe de lecture qui grossit le texte instantanément.">
                    Utilisez votre souris pour explorer la page. Le cercle agit comme une loupe de lecture qui grossit le texte instantanément.
                </p>
                <button data-read="Bouton d'action">Action 1</button>
                <button data-read="Bouton de contact">Contact</button>
            </section>

            <section class="card">
                <h2 data-read="Accessibilité Renforcée">Accessibilité Renforcée</h2>
                <p data-read="Nous utilisons un contraste élevé (Jaune sur Noir) qui est la combinaison la plus perceptible pour l'œil humain.">
                    Nous utilisons un contraste élevé (Jaune sur Noir) qui est la combinaison la plus perceptible pour l'œil humain.
                </p>
                <ul style="font-size: 1.4rem;">
                    <li data-read="Texte agrandi">Texte agrandi</li>
                    <li data-read="Contraste fort">Contraste fort</li>
                    <li data-read="Navigation simple">Navigation simple</li>
                </ul>
            </section>
        </main>

        <footer>
            <p data-read="Pied de page - Droits réservés 2024">© 2024 - Projet Accessibilité</p>
        </footer>
    </div>

    <script>
        const loupe = document.getElementById('loupe');
        const loupeContent = document.getElementById('loupe-content');
        
        // Mouvement de la loupe
        document.addEventListener('mousemove', (e) => {
            // Positionner la loupe sur la souris
            loupe.style.left = e.clientX + 'px';
            loupe.style.top = e.clientY + 'px';

            // Détecter l'élément sous la souris
            // Nous utilisons elementFromPoint mais ignorons la loupe elle-même (pointer-events: none)
            const elementMouseIsOver = document.elementFromPoint(e.clientX, e.clientY);

            if (elementMouseIsOver) {
                // Vérifier si l'élément a un attribut 'data-read' (priorité)
                let textToDisplay = elementMouseIsOver.getAttribute('data-read');

                // Sinon, essayer de prendre le texte direct s'il n'est pas trop long
                if (!textToDisplay && elementMouseIsOver.innerText && elementMouseIsOver.innerText.length < 100) {
                     // On évite de prendre tout le texte du body ou container
                     if(!elementMouseIsOver.classList.contains('container') && elementMouseIsOver.tagName !== 'BODY') {
                         textToDisplay = elementMouseIsOver.innerText;
                     }
                }

                // Mise à jour du contenu de la loupe
                if (textToDisplay) {
                    loupeContent.innerHTML = textToDisplay;
                    loupe.style.borderColor = "#fff"; // Bordure blanche quand actif
                } else {
                    // Si on survole le vide
                    loupeContent.innerHTML = "";
                    loupe.style.borderColor = "#555"; // Bordure grise quand inactif
                }
            }
        });

        // Gestion de la sortie de la fenêtre
        document.addEventListener('mouseleave', () => {
            loupe.style.opacity = '0';
        });
        document.addEventListener('mouseenter', () => {
            loupe.style.opacity = '1';
        });

        // Initialisation : ajouter l'attribut data-read automatiquement aux paragraphes si absent
        // pour simplifier la vie du développeur
        document.querySelectorAll('p, h1, h2, h3, button, li').forEach(el => {
            if(!el.getAttribute('data-read')) {
                // On tronque le texte s'il est trop long pour l'attribut
                let txt = el.innerText.substring(0, 150); 
                el.setAttribute('data-read', txt);
            }
        });
    </script>
</body>
</html>
